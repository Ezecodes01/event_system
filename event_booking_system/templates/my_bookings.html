{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="my-bookings-container">
  <h2>🎟️ My Bookings</h2>

  {% if tickets %}
  <div class="ticket-grid">
    {% for ticket in tickets %}
    <div class="ticket-card" {% if ticket.event.background_image %}style="background-image: url('{{ ticket.event.background_image.url }}'); background-size: cover; background-position: center;"{% endif %}>
      <h3>{{ ticket.event.title }}</h3>
      <p><strong>Date:</strong> {{ ticket.event.start_time|date:"M d, Y H:i" }}</p>
      <p><strong>Location:</strong> {{ ticket.event.location }}</p>
      <p><strong>Booked By:</strong> {{ ticket.user.username }}</p>
      <p><strong>Attendees:</strong> {{ ticket.attendee_name }}</p>
      <p><strong>Phone Number:</strong> {{ ticket.phone_number }}</p>
      <p><strong>Ticket ID:</strong> #{{ ticket.id }}</p>
      <p><strong>Status:</strong> ✅ Confirmed</p>
      <a href="{% url 'booking_confirmation' ticket.id %}" class="btn-primary">View Ticket</a>
      <a href="{% url 'book_ticket' ticket.event.id %}" class="btn">Book Again</a>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p class="no-bookings">You don’t have any bookings yet.</p>
  <a href="{% url 'event_list' %}" class="btn-primary">Browse Events</a>
  {% endif %}
</div>
{% endblock %}